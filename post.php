<?php if (!defined('__TYPECHO_ROOT_DIR__')) exit; ?>
<?php $this->need('common/header.php'); ?>
<?php if ($this->password && !($_POST['passwd'] && $_POST['passwd'] == $this->password)) : ?>
    <?php $msg = '访问密码错误' ?>
    <div style="width: 100vw;height: 100vh;position:fixed;top: 0;left: 0;z-index: 9999999;background-color:#292E32;">
        <div style="text-align: center;padding: 5px;background-color: #FE445C;color: #fff;"><?php echo $msg ?></div>
        <div style="margin-top: 200px;text-align: center">
            <img style="border-radius: 50%;width: 128px;height: 128px;" src="<?php $this->options->freeAvatar() ?>"
                 alt="">
            <h1 style="color: #fff;font-size: 18px"><?php $this->title() ?></h1>
            <form action="" method="post">
                <label for="">请输入访问密码</label>
                <br>
                <input name="passwd" style="outline: none;padding-left: 20px;" type="password">
                <br>
                <input type="submit"
                       style="outline: none;background-color: #3BB349;border: none;margin-top: 5px;color: #fff;padding: 5px 10px;width: 100px;border-radius: 5px"
                       value="提交">
            </form>
        </div>
    </div>
<?php else: ?>
    <?php
    if ($_GET['download'] && $_GET['download'] == $this->fields->fileName) {
        ob_clean();
        $this->need('common/download.php');
        exit();
    }
    ?>
    <div class="bg-white main-header">
        <h1 class="no-marge"><?php $this->title() ?></h1>
        <p class="blog-info no-marge">
            <i class="iconfont icon-user1"> <?php $this->author(); ?></i>
            <i class="iconfont icon-clock1"> <?php $this->date('Y-m-d'); ?></i>
            <i class="iconfont icon-eye"> <?php get_post_view($this) ?></i>
            <i class="iconfont icon-comment1"> <?php $this->commentsNum('%d条评论'); ?></i>
            <i class="iconfont icon-folder"> <?php $this->category(''); ?></i>
            <i class="iconfont icon-tags-o"><?php $this->tags(""); ?></i>
        </p>
    </div>

    <div class="blog-content">
        <div class="crumbs">
            <a href="<?php $this->options->siteUrl(); ?>"><i class="iconfont icon-home"></i> 首页</a> <i
                    class="split">/</i>
            <strong>正文</strong>
        </div>
        <div id="write">
            <?php $this->content(); ?>
        </div>
        <?php $this->need('common/file.php'); ?>
        <div class="blog-copyright">
            <p>
                <svg t="1615984291257" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg"
                     p-id="19579" width="200" height="200">
                    <path d="M435.205 255.99c-6.003 2.861-11.799 6.004-17.375 9.525-7.532 4.659-9.794 14.466-5.16 21.949a15.921 15.921 0 0 0 13.524 7.52c2.897 0 5.796-0.758 8.413-2.36a144.277 144.277 0 0 1 14.355-7.85c7.948-3.79 11.286-13.303 7.483-21.252-3.791-7.948-13.28-11.409-21.24-7.532z"
                          fill="#FF9900" p-id="19580"></path>
                    <path d="M876.832 765.444c-14.99-5.918-78.966-36.462-78.966-127.729V395.972c0-117.557-95.865-226.016-215.183-258.371v-1.993c0-39.557-32.195-71.74-71.728-71.74-0.123 0-0.269 0.012-0.392 0.012-0.147 0-0.256-0.012-0.416-0.012-39.532 0-71.728 32.183-71.728 71.74v1.993c-119.3 32.354-215.189 140.813-215.189 258.371v241.743c0 91.268-63.981 121.812-78.985 127.729-10.913 5.551-18.415 16.825-18.415 29.934 0 18.561 15.028 33.675 33.632 33.675h702.182c18.623 0 33.639-15.114 33.639-33.675-0.011-13.108-7.518-24.383-18.451-29.934z m-346.508-0.172H245.511c23.526-30.422 41.47-72.203 41.47-127.57V432.595c0.263 0.073 0.525 0.122 0.789 0.207v-36.817c0-105.048 108.221-204.361 222.795-204.606 114.536 0.245 222.764 99.558 222.764 204.606v36.817c0.269-0.085 0.538-0.134 0.795-0.207v205.12c0 55.367 17.938 97.136 41.464 127.558H530.324v-0.001z"
                          fill="#FF9900" p-id="19581"></path>
                    <path d="M392.249 306.172c-7.104-5.283-17.07-3.815-22.364 3.167-22.97 30.582-35.075 66.922-35.075 105.22v159.425c0 8.791 7.11 15.944 15.939 15.944 8.816 0 15.92-7.153 15.92-15.944V414.559c0-31.352 9.953-61.09 28.686-86.059 5.332-7.08 3.901-17.058-3.106-22.328zM615.221 844.949H569.6c-2.006 0.183-3.79 0.904-5.308 2.03-0.194-0.368-0.439-0.661-0.647-1.003-3.045 1.124-5.588 3.252-6.407 6.529-3.583 22.181-22.39 39.397-45.413 40.18-23.025-0.782-41.832-17.999-45.402-40.18-0.807-3.277-3.351-5.405-6.432-6.529-0.196 0.342-0.416 0.635-0.612 1.003a10.465 10.465 0 0 0-5.331-2.03h-45.609c-4.769 0.293-8.241 3.875-8.975 8.462 4.414 57.506 52.09 103.079 110.685 103.079 0.563 0 1.125-0.049 1.688-0.049 0.562 0 1.113 0.049 1.675 0.049 58.607 0 106.296-45.586 110.697-103.079-0.734-4.598-4.231-8.169-8.988-8.462z"
                          fill="#FF9900" p-id="19582"></path>
                </svg>
                版权属于: <?php $this->options->title() ?></p>
            <p>
                <svg t="1615984401899" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg"
                     p-id="19719" width="200" height="200">
                    <path d="M62.296463 576.23471l64.234709-64.23471 85.676565 85.646279-42.853425 42.853425a121.140424 121.140424 0 0 0 0 171.292559l42.853425 42.853425a121.140424 121.140424 0 0 0 171.292559 0l214.145983-214.145984a121.140424 121.140424 0 0 0 0-171.322844l-42.823139-42.823139a120.080445 120.080445 0 0 0-24.440081-18.413345l88.705075-88.67479 85.64628 85.64628a211.995741 211.995741 0 0 1 0 299.822548l-256.969124 256.969123a211.995741 211.995741 0 0 1-299.822548 0l-85.646279-85.646279a211.995741 211.995741 0 0 1 0-299.822548z"
                          fill="#E13455" p-id="19720"></path>
                    <path d="M961.703537 447.76529l-64.234709 64.23471-85.676565-85.646279 42.853425-42.853425a121.140424 121.140424 0 0 0 0-171.292559l-42.853425-42.853425a121.140424 121.140424 0 0 0-171.292559 0l-214.145983 214.145984a121.140424 121.140424 0 0 0 0 171.322844l42.823139 42.823139a120.080445 120.080445 0 0 0 24.440081 18.413345L404.911866 704.734414l-85.64628-85.64628a211.995741 211.995741 0 0 1 0-299.822548l256.969124-256.969123a211.995741 211.995741 0 0 1 299.822548 0l85.646279 85.646279a211.995741 211.995741 0 0 1 0 299.822548z"
                          fill="#F3ADBA" p-id="19721"></path>
                </svg>
                本文链接:
                <a class="link" href="<?php $this->permalink() ?>" target="_blank"><?php $this->permalink() ?></a></p>
            <p>
                <svg t="1615984451324" class="icon" viewBox="0 0 1039 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg"
                     p-id="19997" width="200" height="200">
                    <path d="M539.962335 944.934087c-233.340866 0-424.256121-190.915254-424.25612-424.256121s190.915254-424.256121 424.25612-424.25612 424.256121 190.915254 424.256121 424.25612c0 235.269303-190.915254 424.256121-424.256121 424.256121z m0-771.374765c-190.915254 0-347.118644 156.20339-347.118644 347.118644s156.20339 347.118644 347.118644 347.118644 347.118644-156.20339 347.118644-347.118644-156.20339-347.118644-347.118644-347.118644z"
                          fill="#388CEB" p-id="19998"></path>
                    <path d="M694.237288 597.815443h-192.843691c-21.212806 0-38.568738-17.355932-38.568738-38.568739v-231.412429c0-21.212806 17.355932-38.568738 38.568738-38.568738s38.568738 17.355932 38.568738 38.568738v192.843691h154.274953c21.212806 0 38.568738 17.355932 38.568738 38.568738s-17.355932 38.568738-38.568738 38.568739z"
                          fill="#E78E00" p-id="19999"></path>
                </svg>
                本文最后更新于<?php echo date('Y年m月d日', $this->modified); ?>
                ，已超过<?php echo floor((time() - ($this->modified)) / 86400); ?>天没有更新，若内容或图片失效，请留言反馈。
            </p>
            <p>
                <svg t="1615984429941" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg"
                     p-id="19858" width="200" height="200">
                    <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#FDEBED"
                          p-id="19859"></path>
                    <path d="M678.4 742.4c-35.84 0-64-28.16-64-64v-6.4L482.56 614.4c-42.24 47.36-115.2 51.2-162.56 7.68-47.36-42.24-51.2-115.2-7.68-162.56 38.4-42.24 101.12-49.92 148.48-19.2l96-71.68c-5.12-6.4-6.4-15.36-6.4-23.04 0-35.84 28.16-64 64-64s64 28.16 64 64-28.16 64-64 64c-16.64 0-33.28-6.4-44.8-17.92l-89.6 66.56c35.84 35.84 42.24 92.16 17.92 135.68l125.44 53.76c16.64-30.72 56.32-42.24 87.04-25.6 30.72 16.64 42.24 56.32 25.6 87.04-12.8 20.48-34.56 33.28-57.6 33.28z"
                          fill="#EC3A4E" p-id="19860"></path>
                </svg>
                本文允许转载，但请在转载时请以超链接或其它形式标明文章出处
            </p>
        </div>
        <div class="neighbor">
            <?php $this->thePrev('%s', '<a class="fr" href="javascript:void(0)">没有了...</a>', ['title' => "下一篇", 'tagClass' => "fr"]); ?>
            <?php $this->theNext('%s', '<a class="fl" href="javascript:void(0)">没有了...</a>', ['title' => "上一篇", 'tagClass' => "fl"]); ?>
        </div>
        <?php $this->need('common/comments.php'); ?>
    </div>
<?php endif; ?>
<?php $this->need('common/footer.php'); ?>
